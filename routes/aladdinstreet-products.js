var products = [{"product_id":754535433,"sku":"testproduct1234","quantity":20,"stock_status_id":0,"price":200,"weight":1,"length":1,"width":1,"height":1,"name":"test product","description":"test product","details":"<p>test product&nbsp;</p>\r\n","long_description":""},{"product_id":7365,"sku":"BULK-POST3","quantity":1,"stock_status_id":1,"price":50,"weight":10,"length":10,"width":10,"height":10,"name":"Product PostMe Test 3","description":"Product PostMe Test 3","details":"<p>Test Bulk Post Me Upload</p>\r\n","long_description":"<p>Test Bulk Post Me Upload</p>\r\n"},{"product_id":7375,"sku":"Test12344","quantity":3,"stock_status_id":0,"price":300,"weight":5,"length":5,"width":5,"height":5,"name":"test","description":"test","details":"","long_description":""},{"product_id":108,"sku":"624901 ","quantity":15,"stock_status_id":0,"price":84.69,"weight":1.68,"length":0,"width":0,"height":0,"name":"APOTEC Collagen Drink ","description":"Collagen 5500 is specially designed to reduce visible signs of aging such as wrinkles, age spots, dull skin, freckles and sagging skin. ","details":"<p><span style=\"font-size:14px\"><span style=\"font-family:arial,helvetica,sans-serif\"><strong>Benefits: &nbsp; &nbsp; </strong>&nbsp; &nbsp; &nbsp; </span></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />\r\n<span style=\"font-size:12px\"><span style=\"font-family:arial,helvetica,sans-serif\">- Improves skin elasticity and firmness &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />\r\n- Reduce wrinkles, pigmentation and fine lines<br />\r\n- Promote fair skin &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<br />\r\n- Relieve joint pain</span></span></p>\r\n","long_description":"<p><span style=\"font-size:12px\"><span style=\"font-family:arial,helvetica,sans-serif\">Collagen 5500 is produced by using an integrated process corresponding to stringent quality and&nbsp;production control procedures.</span></span></p>\r\n\r\n<p><span style=\"font-size:12px\"><span style=\"font-family:arial,helvetica,sans-serif\">Collagen 5500 is specially designed to reduce visible signs of aging such as wrinkles, age spots,&nbsp;dull skin, freckles and sagging skin.</span></span></p>\r\n\r\n<p><span style=\"font-size:12px\"><span style=\"font-family:arial,helvetica,sans-serif\">Combining with the supplementation of Collagen 5500 and&nbsp;healthy lifestyle, skin health can be improved, and a glowing and radiant young looking skin can&nbsp;be observed.</span></span></p>\r\n\r\n<p>&nbsp;</p>\r\n"},{"product_id":7345,"sku":"789internteststore789","quantity":50,"stock_status_id":0,"price":400,"weight":100,"length":30,"width":20,"height":35,"name":"Test product update ","description":"For testing purpose","details":"testing purpose only","long_description":"testing purpose only"},{"product_id":7344,"sku":"789internteststore789","quantity":50,"stock_status_id":0,"price":500,"weight":100,"length":30,"width":20,"height":35,"name":"Intern Test Item 1","description":"For testing purpose","details":"testing purpose only","long_description":"testing purpose only"},{"product_id":7343,"sku":"789internteststore789","quantity":50,"stock_status_id":0,"price":500,"weight":100,"length":30,"width":20,"height":35,"name":"Intern Test Item 1","description":"For testing purpose","details":"testing purpose only","long_description":"testing purpose only"},{"product_id":7335,"sku":"086251-100-98","quantity":5,"stock_status_id":1,"price":249,"weight":500,"length":14,"width":2,"height":24,"name":"Bonia Black Duo Detachable Organiser","description":"The interior of our Black Duo Detachable Organiser is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way! ","details":"<p>The interior of our Black Duo Detachable Organiser is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way!&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>What&#39;s In The Box:</strong></span></p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\">1 x </span>Bonia Black Duo Detachable Organiser</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>Features:</strong></span></p>\n\n<ul>\n <li>9 wide compartments</li>\n <li>1 zipper compartment</li>\n <li>14 card sleeves</li>\n <li>1 window slot</li>\n <li>1 coin pocket</li>\n <li>1 pen holder</li>\n <li>Leather Type: Sophia Leather</li>\n <li>Texture Type: Sophia</li>\n <li>Material Type: Hard</li>\n <li>Logo Type: Metal</li>\n <li>Accessories Type: Nickel<br />\n &nbsp;</li>\n</ul>\n","long_description":null},{"product_id":7334,"sku":"086251-504-98 ","quantity":5,"stock_status_id":1,"price":149,"weight":300,"length":9,"width":2,"height":12,"name":"Bonia Black Duo Detachable Bifold Wallet","description":"The interior of our Black Duo Detachable Bifold Wallet is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way! ","details":"<p>The interior of our Black Duo Detachable Bifold Wallet is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way!&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>What&#39;s In The Box:</strong></span></p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\">1 x </span>Bonia Black Duo Detachable Bifold Wallet</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>Features:</strong></span></p>\n\n<ul>\n <li>2 wide compartments</li>\n <li>6 inner compartments</li>\n <li>2 extra compartments</li>\n <li>14 card sleeves</li>\n <li>1 window slot</li>\n <li>Leather Type: Sophia Leather</li>\n <li>Texture Type: Sophia</li>\n <li>Material Type: Hard</li>\n <li>Logo Type: Metal</li>\n <li>Accessories Type: Nickel</li>\n <li>Lining Type: Black Monogram</li>\n</ul>\n","long_description":null},{"product_id":7333,"sku":"086251-503-98","quantity":2,"stock_status_id":1,"price":129,"weight":300,"length":9,"width":2,"height":12,"name":"Bonia Black Duo Functional Bifold Wallet","description":"The interior of our Black Duo Functional Bifold Wallet is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way!","details":"<p>The interior of our Black Duo Functional Bifold Wallet is made of soft genuine leather while its exterior is crafted from our Sophia leather with unique texture; this bifold wallet secures your cash and cards in the most stylish way!</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>What&#39;s In The Box:</strong></span></p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\">1 x </span>Bonia Black Duo Functional Bifold Wallet</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-family:arial,helvetica,sans-serif\"><strong>Features:</strong></span></p>\n\n<ul>\n <li>2 wide compartments</li>\n <li>5 inner compartments</li>\n <li>9 card sleeves</li>\n <li>1 window slot</li>\n <li>Leather Type: Sophia Leather</li>\n <li>Texture Type: Sophia</li>\n <li>Material Type: Hard</li>\n <li>Logo Type: Metal</li>\n <li>Accessories Type: Nickel</li>\n <li>Lining Type: Black Monogram&nbsp;</li>\n</ul>\n","long_description":null}];

var mysql = require('mysql'),
    async = require('async'),
    cfg = require('../config/config_aladdinstreet');

// Connection to Aladdin Street mySQL DB
var connection = mysql.createConnection({
    host     : cfg.aws.host,
    port     : cfg.aws.port,
    user     : cfg.aws.user,
    password : cfg.aws.password,
    database : cfg.aws.database,
    debug    : true
});

exports.findAllProducts = function (req, res, next) {
    console.log("[findAll]");
    
    connection.query(cfg.mysql.productproductdescriptionlistquery, function(err, results, fields) {
        var products = '';

        products = JSON.stringify(results);

        res.send(results);
    })

};

exports.findMockAll = function (req, res, next) {
    console.log("[findMockAll]");
    var name = req.query.name;
    if (name) {
        res.send(products.filter(function(product) {
            return product.name;
        }));
    } else {
        res.send(products);
    }
};

exports.findMockById = function (req, res, next) {
    var id = req.params.id;
    res.send(products[id]);
};

exports.findMockReports = function (req, res, next) {
    var id = parseInt(req.params.id),
        response,
        reports = [],
        product;

    response = {
        id: id,
        productName: products[id].name,
        sku: products[id].sku
    }

    for (var i=0; i<products.length; i++) {
        product = products[i];
        if (product.product_id === id) {
            reports.push({id: product.product_id, productName: product.name, sku: product.sku});
        }
    }

    response.reports = reports;

    res.send(response);
};